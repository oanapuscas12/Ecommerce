<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/user-details.css}">
    <script th:src="@{/js/user-details.js}"></script>
    <title th:text="${pageTitle}">User Details</title>
</head>
<head th:replace="layout/base :: head"></head>
<header th:replace="layout/base :: navigation"></header>
<h1 th:text="${pageTitle}" class="text-center w-100 mt-3">Page Title</h1>
<main>
    <section th:fragment="content">
        <div class="user-profile">
            <div class="profile-row">
                <div class="profile-label"><strong>Username:</strong></div>
                <div class="profile-value"><span th:text="${user.username}"></span></div>
            </div>
            <div class="profile-row">
                <div class="profile-label"><strong>Email:</strong></div>
                <div class="profile-value"><span th:text="${user.email}"></span></div>
            </div>

            <div th:if="${!user.isAdmin}">
                <div class="profile-row">
                    <div class="profile-label"><strong>Legal Business Name:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.legalBusinessName : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>Telephone:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.phoneNumber : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>Country:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.country : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>County:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.county : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>Address:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.address : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>City:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.city : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>Industry:</strong></div>
                    <div class="profile-value">
                        <span th:text="${merchant != null ? merchant.industry : 'No data provided yet'}"></span>
                    </div>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>Store Launched:</strong></div>
                    <p th:text="${merchant != null ? (merchant.storeLaunched ? 'Store is Launched' : 'Store is Not Launched') : 'No data provided yet'}"></p>
                </div>
                <div class="profile-row">
                    <div class="profile-label"><strong>Store Active:</strong></div>
                    <p th:text="${merchant != null ? (merchant.storeActive ? 'Store is Active' : 'Store is Not Active') : 'No data provided yet'}"></p>
                </div>
            </div>

            <!-- Common fields for all users -->
            <div class="profile-row">
                <div class="profile-label"><strong>Active:</strong></div>
                <div class="profile-value"><span th:text="${user.active} ? 'Yes' : 'No'"></span></div>
            </div>
            <div class="profile-row">
                <div class="profile-label"><strong>Is Admin:</strong></div>
                <div class="profile-value"><span th:text="${user.isAdmin} ? 'Yes' : 'No'"></span></div>
            </div>
            <div class="profile-row">
                <div class="profile-label"><strong>Last Login Date:</strong></div>
                <div class="profile-value"><span id="lastLoginDate" th:text="${user.lastLoginDate}"></span></div>
            </div>
            <div class="profile-row" th:if="${currentUser.id} == ${user.id}">
                <div class="profile-label"><strong>Reset Password:</strong></div>
                <div class="profile-value">
                    <button onclick="window.location.href='/recover-password';">
                        Reset Password
                    </button>
                </div>
            </div>
        </div>
    </section>
</main>
</html>